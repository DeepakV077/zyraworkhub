version: 1

types:
  - name: User
    table:
      fields:
        email: String!
        passwordHash: String!
        createdAt: Timestamp!
        displayName: String!
        photoUrl: String
        bio: String
        contactNumber: String
        role: String

  - name: SpeakerApplication
    table:
      fields:
        user: User!
        applicationDate: Timestamp!
        status: String!
        resumeUrl: String
        relevantExperience: String
        proposedTopics: [String]

  - name: WebinarSubmission
    table:
      fields:
        user: User!
        title: String!
        description: String!
        proposedDateTime: Timestamp!
        submissionDate: Timestamp!
        status: String!
        expectedAudience: String
        learningObjectives: [String]
        materialsUrl: String

  - name: Webinar
    table:
      fields:
        title: String!
        description: String!
        dateTime: Timestamp!
        speaker: User!
        submission: WebinarSubmission!
        status: String!
        duration: Int
        platformLink: String
        recordingLink: String

  - name: Notification
    table:
      fields:
        user: User!
        type: String!
        message: String!
        createdAt: Timestamp!
        isRead: Boolean!
        relatedEntityId: UUID

# -------------------------------------------------------------------------
# ðŸ”¹ Connectors: define how your frontend or backend queries the data
# -------------------------------------------------------------------------
connectors:
  # Fetch all users
  - name: getUsers
    source: firestore
    resource: User
    query:
      type: find
      where: {}

  # Add a new user
  - name: addUser
    source: firestore
    resource: User
    mutation:
      type: insert

  # Fetch all speaker applications
  - name: getSpeakerApplications
    source: firestore
    resource: SpeakerApplication
    query:
      type: find
      where: {}

  # Add a new speaker application
  - name: addSpeakerApplication
    source: firestore
    resource: SpeakerApplication
    mutation:
      type: insert

  # Fetch all webinar submissions
  - name: getWebinarSubmissions
    source: firestore
    resource: WebinarSubmission
    query:
      type: find
      where: {}

  # Add new webinar submission
  - name: addWebinarSubmission
    source: firestore
    resource: WebinarSubmission
    mutation:
      type: insert

  # Fetch all webinars
  - name: getWebinars
    source: firestore
    resource: Webinar
    query:
      type: find
      where: {}

  # Add a webinar
  - name: addWebinar
    source: firestore
    resource: Webinar
    mutation:
      type: insert

  # Fetch notifications
  - name: getNotifications
    source: firestore
    resource: Notification
    query:
      type: find
      where: {}

  # Add notification
  - name: addNotification
    source: firestore
    resource: Notification
    mutation:
      type: insert
